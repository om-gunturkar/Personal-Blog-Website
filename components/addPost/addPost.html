<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add New Blog Post - My Personal Blog</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./addPost.css" />
    <link rel="stylesheet" href="../navbar.css" />
  </head>
  <body>
    <!-- Desktop Navbar -->
    <header class="main-header desktop-navbar">
      <div class="header-container">
        <nav class="nav-links">
          <a href="../../index.html">Home</a>
          <a href="./addPost.html" class="active">Add Post</a>
          <a href="../about/about.html">About</a>
          <a href="../contactMe/contact.html">Contact</a>
        </nav>
      </div>
    </header>

    <!-- Mobile Navbar -->
    <header class="main-header mobile-navbar">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="../../index.html">Om Gunturkar</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link" href="../../index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="./addPost.html">Add Post</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../about/about.html">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../contactMe/contact.html">Contact</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main class="container">
      <section class="page-header">
        <h1>Add New Blog Post</h1>
      </section>

      <section class="page-content">
        <form
          id="add-post-form"
          class="add-post-form needs-validation"
          novalidate
        >
          <div class="mb-3">
            <label for="post-title" class="form-label">Title:</label>
            <input
              type="text"
              id="post-title"
              name="title"
              class="form-control"
              required
            />
            <div class="invalid-feedback">
              Please provide a title for your post.
            </div>
          </div>

          <div class="mb-3">
            <label for="post-subject" class="form-label"
              >Subject/Short Excerpt:</label
            >
            <input
              type="text"
              id="post-subject"
              name="subject"
              class="form-control"
              required
            />
            <div class="invalid-feedback">
              Please provide a subject or short excerpt.
            </div>
          </div>

          <div class="mb-3">
            <label for="post-category" class="form-label">Category:</label>
            <select
              id="post-category"
              name="category"
              class="form-select"
              required
            >
              <option selected disabled value="">Select a Category</option>
              <option value="Web Development">Web Development</option>
              <option value="Data Science">Data Science</option>
              <option value="UX/UI Design">UX/UI Design</option>
              <option value="AI/ML">AI/ML</option>
              <option value="General">General</option>
            </select>
            <div class="invalid-feedback">Please select a valid category.</div>
          </div>

          <div class="mb-3">
            <label for="post-image-file" class="form-label"
              >Upload Image:</label
            >
            <input
              type="file"
              id="post-image-file"
              accept="image/*"
              class="form-control"
            />
            <div class="form-text">
              Upload an image to feature with your post. A default will be used
              if none is uploaded.
            </div>
          </div>

          <div class="mb-3">
            <label for="post-description" class="form-label"
              >Full Content:</label
            >
            <textarea
              id="post-description"
              name="description"
              rows="10"
              class="form-control"
              required
            ></textarea>
            <div class="invalid-feedback">
              Please provide the full content for your post.
            </div>
          </div>

          <button type="submit" class="btn btn-primary">Publish Post</button>
        </form>
        <div
          id="message"
          style="margin-top: 20px; text-align: center; font-weight: bold"
        ></div>
      </section>
    </main>

    <footer>
      <p>&copy; 2024 My Personal Blog. All Rights Reserved.</p>
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <script>
      // JavaScript for Bootstrap validation and preventing redirect
      (() => {
        "use strict";
        const form = document.getElementById("add-post-form");

        form.addEventListener(
          "submit",
          (event) => {
            // Check if the form is invalid
            if (!form.checkValidity()) {
              event.preventDefault(); // Stop the form from submitting
              event.stopPropagation(); // Stop the event from propagating
            } else {
              // This is where you would handle the successful form submission logic.
              // For example, calling your function to save the post.
              // For now, we will just show a success message and then redirect.

              // Display success message
              const messageDiv = document.getElementById("message");
              messageDiv.style.color = "green";
              messageDiv.textContent = "Post submitted successfully!";

              // You can keep this part of the code from your original script.js
              // It won't be triggered if the form is invalid.
              // For example:
              // event.preventDefault();
              // const post = {
              //     id: Date.now(),
              //     title: form.querySelector('#post-title').value,
              //     // ... other post data
              // };
              // savePost(post);

              // Redirect to the home page after a delay
              // You can remove this part if your script.js already handles redirection
              setTimeout(() => {
                window.location.href = "../../index.html";
              }, 2000); // 2-second delay
            }

            // Add the 'was-validated' class to show validation feedback
            form.classList.add("was-validated");
          },
          false
        );
      })();
    </script>
    <script src="../../script.js" defer></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
